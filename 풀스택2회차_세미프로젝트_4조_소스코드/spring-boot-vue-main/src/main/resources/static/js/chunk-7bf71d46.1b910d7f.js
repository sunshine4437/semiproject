(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bf71d46"],{"0404":function(t,e,a){"use strict";a("55ae")},"2b6e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"payment"},[a("div",{staticClass:"orderProduct"},[a("h2",[t._v("주문 상품 정보")]),a("table",{staticClass:"orderProductTable"},t._l(t.getOrderList,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"orderProductTd",staticStyle:{width:"10%"}},[a("h3",{domProps:{innerHTML:t._s(e.seller)}})]),a("td",{staticClass:"orderProductTd",staticStyle:{width:"10%"}},[a("img",{staticClass:"orderProductImg",attrs:{src:"/api/product/productimage/"+e.productno+"/"+e.imagename,alt:"productImage"}})]),a("td",{staticClass:"orderProductTd",staticStyle:{width:"50%","text-align":"left"}},[a("p",{domProps:{innerHTML:t._s(e.productname)}}),a("p",{domProps:{innerHTML:t._s(e.option1)}}),a("p",[a("span",[t._v("옵션 : ")]),a("span",{domProps:{innerHTML:t._s(e.option2)}})])]),a("td",{staticClass:"orderProductTd",staticStyle:{width:"10%"}},[a("span",{domProps:{innerHTML:t._s(t.AddComma(e.amount))}}),a("span",[t._v("개")])]),a("td",{staticClass:"orderProductTd",staticStyle:{width:"10%"}},[a("span",{domProps:{innerHTML:t._s(t.AddComma(e.price))}}),a("span",[t._v("원")])])])})),0)]),a("div",{staticClass:"coupon"},[a("h2",[t._v("할인/포인트")]),a("table",{staticClass:"couponTable"},[a("tr",[t._m(0),a("td",{staticClass:"couponNum"},[t._v(t._s(t.AddComma(t.coupon))+"원")]),a("td",[a("button",{staticClass:"couponBtn",on:{click:function(e){return t.applyCoupon()}}},[t._v(" 쿠폰 변경 ")])])]),t._m(1),a("tr",[t._m(2),a("td",{staticClass:"couponNum"},[t._v(t._s(t.AddComma(t.point))+"원")]),t._m(3),a("td",[a("button",{staticClass:"couponBtn",on:{click:function(e){return t.applyPoint()}}},[t._v(" 사용 ")])]),a("td",{staticStyle:{width:"200px"}},[t._v(" 사용 가능 포인트 : "+t._s(t.AddComma(t.usable))+"원 ")])])])]),a("div",{staticClass:"delivery"},[a("h2",{staticStyle:{margin:"20px 0 0 -10px"}},[t._v("배송지 입력")]),a("p",[a("span",{staticStyle:{"margin-right":"28px"}},[t._v("이름")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"shortInput inputValues",attrs:{type:"text",id:"username",name:"이름"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("p",[a("span",[t._v("전화번호")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticClass:"shortInput inputValues",attrs:{type:"text",placeholder:"-없이 숫자만",id:"mobile",name:"전화번호"},domProps:{value:t.mobile},on:{keyup:function(e){return t.phoneCheck()},input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),a("span",[t.phoneValidate?t._e():a("span",{staticClass:"validate"},[t._v("- 없이 숫자만 입력해주세요")])])]),a("p",[a("span",[t._v("우편번호")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.postcode,expression:"postcode"}],staticClass:"shortInput inputValues",attrs:{type:"text",placeholder:"우편번호",name:"우편번호",id:"zipcode"},domProps:{value:t.postcode},on:{input:function(e){e.target.composing||(t.postcode=e.target.value)}}}),a("span",[a("button",{staticClass:"addrBtn",on:{click:function(e){return t.execDaumPostcode()}}},[t._v(" 검색 ")])])])]),a("p",[a("span",[t._v("기본주소")]),a("span",{attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"longInput inputValues",attrs:{type:"text",id:"address",placeholder:"주소",name:"주소"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])]),a("p",[a("span",[t._v("상세주소")]),a("span",{attrs:{colspan:"2"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.extraAddress,expression:"extraAddress"}],staticClass:"longInput inputValues",attrs:{type:"text",id:"detailAddress",placeholder:"상세주소",name:"상세주소"},domProps:{value:t.extraAddress},on:{input:function(e){e.target.composing||(t.extraAddress=e.target.value)}}})])])]),a("div",{staticClass:"payMethod"},[a("h2",{staticStyle:{margin:"20px 0 0 -10px"}},[t._v("결제수단 선택")]),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioPay,expression:"radioPay"}],staticStyle:{width:"auto"},attrs:{type:"radio",value:"카드",name:"payMethodRadio",id:"payMethodRadio"},domProps:{checked:t._q(t.radioPay,"카드")},on:{change:function(e){t.radioPay="카드"}}}),t._v("카드 결제 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioPay,expression:"radioPay"}],staticStyle:{width:"auto","margin-left":"30px"},attrs:{type:"radio",value:"무통장입금",name:"payMethodRadio",id:"payMethodRadio"},domProps:{checked:t._q(t.radioPay,"무통장입금")},on:{change:function(e){t.radioPay="무통장입금"}}}),t._v("무통장 입금 "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.radioPay,expression:"radioPay"}],staticStyle:{width:"auto","margin-left":"30px"},attrs:{type:"radio",value:"휴대폰 결제",name:"payMethodRadio",id:"payMethodRadio"},domProps:{checked:t._q(t.radioPay,"휴대폰 결제")},on:{change:function(e){t.radioPay="휴대폰 결제"}}}),t._v("휴대폰 결제 ")]),"카드"===t.radioPay?a("div",[t._m(4)]):t._e(),"무통장입금"===t.radioPay?a("div",[t._m(5)]):t._e(),"휴대폰 결제"===t.radioPay?a("div"):t._e()]),a("div",{staticClass:"payInfo"},[a("h2",[t._v("최종 결제 정보")]),a("table",{staticClass:"payInfoTable"},[a("tr",[a("td",{staticClass:"payIf",staticStyle:{"border-top":"1px solid rgb(197, 195, 195)"}},[t._v(" 상품금액 ")]),a("td",{staticClass:"payNum",staticStyle:{"border-top":"1px solid rgb(197, 195, 195)"}},[t._v(" "+t._s(t.AddComma(t.totalPrice))+"원 ")]),a("td",{staticClass:"buyBtnTd",attrs:{rowspan:"4"}},[a("button",{staticClass:"buyBtn",on:{click:function(e){return t.payCheck()}}},[t._v(" 결제하기 ")])])]),a("tr",[a("td",{staticClass:"payIf"},[t._v("할인금액")]),a("td",{staticClass:"payNum"},[t._v(t._s(t.AddComma(t.sale))+"원")])]),a("tr",[a("td",{staticClass:"payIf"},[t._v("배송비")]),a("td",{staticClass:"payNum"},[t._v(t._s(t.AddComma(t.delivery))+"원")])]),a("tr",{staticStyle:{"border-top":"2px rgb(197, 195, 195) solid"}},[a("td",{staticClass:"payIf",staticStyle:{"border-bottom":"1px solid rgb(197, 195, 195)"}},[t._v(" 결제 금액 ")]),a("td",{staticClass:"payNum",staticStyle:{"border-bottom":"1px solid rgb(197, 195, 195)"}},[t._v(" "+t._s(t.AddComma(t.finalPrice))+"원 ")])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("span",[t._v("쿠폰 할인")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",{staticClass:"tableMiddle"},[t._v("1")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("span",[t._v("포인트")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("input",{staticStyle:{width:"100%"},attrs:{id:"pointInput",type:"text"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"creditPay"},[a("option",{attrs:{value:"선택"}},[t._v("선택")]),a("option",{attrs:{value:""}},[t._v("신한카드")]),a("option",{attrs:{value:""}},[t._v("국민카드")]),a("option",{attrs:{value:""}},[t._v("삼성카드")]),a("option",{attrs:{value:""}},[t._v("현대카드")]),a("option",{attrs:{value:""}},[t._v("롯데카드")]),a("option",{attrs:{value:""}},[t._v("농협카드")]),a("option",{attrs:{value:""}},[t._v("우리카드")]),a("option",{attrs:{value:""}},[t._v("하나카드")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{staticClass:"cashPay"},[a("option",{attrs:{value:"선택"}},[t._v("선택")]),a("option",{attrs:{value:""}},[t._v("신한은행")]),a("option",{attrs:{value:""}},[t._v("국민은행")]),a("option",{attrs:{value:""}},[t._v("우리은행")]),a("option",{attrs:{value:""}},[t._v("카카오뱅크")])])}],o=a("bc3a"),r=a.n(o),d=a("2f62");const n=Object(d["a"])("loginStore"),l=Object(d["a"])("orderList");var p={data(){return{point:0,totalPrice:0,coupon:0,sale:0,finalPrice:0,radioPay:"",delivery:0,phoneValidate:!0,usable:0,open:!1,name:"",mobile:"",postcode:"",address:"",extraAddress:""}},methods:{applyPoint(){let t=document.getElementById("pointInput").value;""===t?alert("숫자를 입력해주세요"):t>parseInt(this.usable)+parseInt(this.point)?alert("포인트가 부족합니다."):(this.sale-=parseInt(this.point),this.usable=this.usable-t+parseInt(this.point),this.point=t,this.sale+=parseInt(this.point),this.finalPrice=this.totalPrice-this.sale+this.delivery)},applyCoupon(){0==this.coupon?(this.coupon=.1*this.totalPrice,this.sale+=parseInt(this.coupon),this.finalPrice=this.totalPrice-this.sale+this.delivery):(this.sale-=parseInt(this.coupon),this.coupon=0,this.finalPrice=this.totalPrice-this.sale+this.delivery)},phoneCheck(){let t=document.getElementById("mobile").value;/^(01[016789]{1}|02|0[3-9]{1}[0-9]{1})[0-9]{3,4}[0-9]{4}$/.test(t)?this.phoneValidate=!0:this.phoneValidate=!1},execDaumPostcode(){new window.daum.Postcode({oncomplete:t=>{""!==this.extraAddress&&(this.extraAddress=""),"R"===t.userSelectedType?this.address=t.roadAddress:this.address=t.jibunAddress,"R"===t.userSelectedType?(""!==t.bname&&/[동|로|가]$/g.test(t.bname)&&(this.extraAddress+=t.bname),""!==t.buildingName&&"Y"===t.apartment&&(this.extraAddress+=""!==this.extraAddress?", "+t.buildingName:t.buildingName),""!==this.extraAddress&&(this.extraAddress=`(${this.extraAddress})`)):this.extraAddress="",this.postcode=t.zonecode}}).open()},AddComma(t){var e=/\B(?=(\d{3})+(?!\d))/g;return(""+t).toString().replace(e,",")},async payCheck(){const t=document.getElementsByClassName("inputValues");for(var e=0;e<t.length;e++)if(0==t[e].value.length)return alert(t[e].name+"을/를 입력하세요"),void t[e].focus();const a=document.querySelector('input[name = "payMethodRadio"]:checked');if(null!=a)if(this.phoneValidate){let t=.9;0!=this.coupon&&(t=.8);let e=[];for(let a=0;a<this.getOrderList.length;a++){let s={id:this.getLogin.user_id,productno:this.getOrderList[a].productno,selectedoption:this.getOrderList[a].option1,amount:this.getOrderList[a].amount,totalprice:this.getOrderList[a].price*t,seller:this.getOrderList[a].seller,ordermethod:this.radioPay,dname:document.getElementById("username").value,dtel:document.getElementById("mobile").value,dzipcode:document.getElementById("zipcode").value,daddress:document.getElementById("address").value,ddetailaddr:document.getElementById("detailAddress").value};await r()({method:"put",url:"/api/product/updateAmount",params:{productno:this.getOrderList[a].productno,amount:this.getOrderList[a].amount}}).then(t=>{200==t.status&&r.a.post("/api/order/create",s).then(t=>{200==t.status&&(void 0!=this.getOrderList[a].basketidx&&e.push(this.getOrderList[a].basketidx),a==this.getOrderList.length-1&&(e.length>0?r.a.delete("/api/basket/delete",{data:e}).then(t=>{200==t.status&&(this.usePoint(),alert("결제를 완료했습니다"),this.$router.push("/"))}).catch(t=>{console.log(t.response)}):(this.usePoint(),alert("결제를 완료했습니다"),this.$router.push("/"))))}).catch(t=>{console.log(t.response)})}).catch(t=>{console.log(t.response)})}}else alert("전화번호를 확인하세요");else alert("결제수단을 선택해주세요")},getMemInfo(){const t=this.getLogin.user_id;r.a.get("/api/member/"+t).then(t=>{this.usable=t.data.point,this.name=t.data.name,this.mobile=t.data.tel,this.postcode=t.data.zipcode,this.address=t.data.address,this.extraAddress=t.data.detailaddr})},usePoint(){r()({method:"put",url:"/api/member/point",params:{id:this.getLogin.user_id,point:this.point}})},...n.mapMutations(["Logout"])},computed:{...l.mapGetters(["getOrderList"]),...n.mapGetters(["getLogin"])},mounted(){for(let t=0;t<this.getOrderList.length;t++)this.totalPrice+=this.getOrderList[t].price,this.sale+=.1*this.getOrderList[t].price;this.totalPrice-this.sale>=5e4?this.delivery=0:this.delivery=2500,this.finalPrice=this.totalPrice-this.sale+this.delivery,this.getMemInfo()}},c=p,u=(a("0404"),a("2877")),m=Object(u["a"])(c,s,i,!1,null,"55bf4d5c",null);e["default"]=m.exports},"55ae":function(t,e,a){}}]);
//# sourceMappingURL=chunk-7bf71d46.1b910d7f.js.map